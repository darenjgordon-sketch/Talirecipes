<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tali‚Äôs Uni Recipes</title>
<style>
  :root{
    --bg:#0e0e0e;
    --text:#ffffff;
    --muted:#cfcfcf;
    --card-radius:18px;
    --shadow: 0 10px 18px rgba(0,0,0,.45);
    --gap:16px;
    --green:#49e07a;
    --yellow:#ffd36b;
    --pink:#ff88a5;
    --blue:#7ec8ff;
    --purple:#b894ff;
    --red:#ff7f7f;
    --border:#2a2a2a;
  }
  html,body{height:100%}
  body{
    margin:0;
    background:var(--bg);
    color:var(--text);
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
    -webkit-font-smoothing:antialiased;
    text-rendering:optimizeLegibility;
    text-align:center;
  }
  /* Header */
  .header{
    background: linear-gradient(90deg, #ff0080, #7928ca, #00b4d8, #90ee02);
    padding: 28px 18px 24px;
    text-align:center;
  }
  .title{
    margin:0;
    font-size: clamp(28px, 6vw, 44px);
    font-weight: 800;
    letter-spacing:.3px;
    text-shadow: 0 2px 8px rgba(0,0,0,.25);
  }
  .subtitle{
    margin:6px 0 0;
    color:#f3f3f3;
    opacity:.9;
    font-size: clamp(14px, 3.2vw, 20px);
    font-weight:600;
  }
  .aff{ margin: 18px auto 14px; font-size: clamp(15px, 3.6vw, 22px); color:#f0f0f0; }
  main{ padding: 0 16px 32px; }
  /* Card grid */
  .grid{
    margin: 10px auto 8px;
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--gap);
    max-width: 760px;
  }
  .card{
    display:flex; align-items:center; justify-content:center; text-align:center;
    padding: 22px 14px; border-radius: var(--card-radius);
    background:#e9e9e9; color:#121212; font-weight:800;
    font-size: clamp(16px, 4.2vw, 22px); box-shadow: var(--shadow);
    text-decoration:none; transition: transform .15s ease, filter .15s ease;
  }
  .card:active{ transform: scale(.98); filter:brightness(.95); }
  .level1{ background: var(--green); }
  .level2{ background: var(--yellow); }
  .level3{ background: var(--pink); }
  .cocktails{ background: var(--blue); }
  .shortcuts{ background: var(--purple); }
  .staples{ background: var(--red); }
  /* Footer */
  footer{ text-align:center; color:var(--muted); margin: 28px 0 40px; font-size: 16px; }
  /* Views */
  .view{ display:none; }
  .view.active{ display:block; }
  .section{ max-width: 860px; margin: 0 auto; padding: 12px 10px 24px; text-align:left; }
  .section.center{ text-align:center; }
  .back{ display:inline-block; margin: 8px 0 18px; color:#9bd1ff; text-decoration:none; font-weight:700; }
  .pill-grid{ display:grid; grid-template-columns: 1fr; gap: var(--gap); max-width: 600px; margin: 14px auto 0; }
  .pill{ background:#1c1c1c; border:1px solid var(--border); color:#f7f7f7; padding: 14px 16px; border-radius: 12px; text-decoration:none; box-shadow: var(--shadow); display:block; text-align:center; }
  @media (min-width:680px){ .pill-grid{ grid-template-columns: 1fr 1fr; } }
  /* Recipe grids */
  .recipe-grid{ display:grid; grid-template-columns: 1fr 1fr; gap: var(--gap); max-width: 700px; margin: 6px auto 0; }
  .rec-btn{ display:flex; align-items:center; justify-content:center; text-align:center; padding:16px 12px; border-radius:14px; color:#0d0d0d; font-weight:900; text-decoration:none; box-shadow: var(--shadow); }
  .c-green{ background: var(--green); } .c-yellow{ background: var(--yellow); } .c-pink{ background: var(--pink); }
  .c-blue{ background: var(--blue); } .c-purple{ background: var(--purple); } .c-red{ background: var(--red); }
  .recipe-card{ background:#1a1a1a; border:1px solid var(--border); border-radius:18px; padding:16px; box-shadow: var(--shadow); text-align:left; }
  .recipe-head{ padding:10px 12px; border-radius:12px; color:#121212; font-weight:900; margin-bottom:10px; }
  .rh-green{ background: var(--green); } .rh-yellow{ background: var(--yellow); } .rh-pink{ background: var(--pink); }
  .rh-blue{ background: var(--blue); } .rh-purple{ background: var(--purple); } .rh-red{ background: var(--red); }

  /* ===== Staples styles ===== */
  .list-card{ background:#141414; border:1px solid var(--border); border-radius:16px; padding:14px; margin:14px 0; box-shadow:var(--shadow); }
  .list-head{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px; }
  .list-title{ font-weight:900; font-size:18px; }
  .list-actions{ display:flex; align-items:center; gap:10px; }
  .icon-btn{ background:#000; border:2px solid #444; color:#fff; border-radius:10px; padding:8px 10px; cursor:pointer; font-weight:800; }
  .icon-btn:hover{ filter:brightness(1.1); }
  .items{ margin:6px 0; }
  .item-row{ display:flex; align-items:center; gap:10px; padding:8px 4px; border-bottom:1px dashed #2a2a2a; }
  .item-row:last-child{ border-bottom:0; }
  .item-row input[type="checkbox"]{ width:18px; height:18px; }
  .item-row label{ flex:1; color:#f3f3f3; }
  .add-row{ display:flex; gap:10px; margin-top:12px; }
  .add-row input{ flex:1; padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:#0c0c0c; color:#fff; }
  .add-row button{ padding:10px 14px; border-radius:10px; border:2px solid #2d6cdf; background:#0b1a35; color:#cfe2ff; font-weight:800; cursor:pointer; }
  .hint{ color:#bfbfbf; font-size:13px; margin-top:8px; }
</style>
</head>
<body>
  <!-- HOME VIEW -->
  <div id="home" class="view active">
    <div class="header">
      <h1 class="title">Tali‚Äôs Uni Recipes</h1>
      <div class="subtitle">Birmingham University</div>
    </div>
    <main class="section center">
      <div class="aff">‚ú® Lead the way and don‚Äôt look back.</div>
      <div class="grid">
        <a class="card level1" href="#/level1">üåü&nbsp;Level 1</a>
        <a class="card level2" href="#/level2">ü•ó&nbsp;Level 2</a>
        <a class="card level3" href="#/level3">üçú&nbsp;Level 3</a>
        <a class="card cocktails" href="#/cocktails">üçπ&nbsp;Cocktails</a>
        <a class="card shortcuts" href="#/shortcuts">‚ö°&nbsp;Shortcuts</a>
        <a class="card staples" href="#/staples">üì¶&nbsp;Staples</a>
      </div>
      <footer>Made with love for Tali, Dad x</footer>
    </main>
  </div>

  <!-- LEVEL 1 -->
  <div id="level1" class="view">
    <div class="header">
      <h1 class="title">Level 1</h1>
      <div class="subtitle">Choose a subcategory</div>
    </div>
    <main class="section center">
      <a class="back" href="#/">‚Üê Back</a>
      <div class="pill-grid">
        <a class="pill" href="#/level1/snacks">ü•™ Snacks</a>
        <a class="pill" href="#/level1/light">ü•ó Light Meals</a>
        <a class="pill" href="#/level1/hearty">üç≤ Hearty Meals</a>
      </div>
    </main>
  </div>

  <!-- LEVEL 1 SUBPAGES (placeholders unchanged) -->
  <div id="level1-snacks" class="view">
    <div class="header"><h1 class="title">Snacks ‚Ä¢ Level 1</h1></div>
    <main class="section">
      <a class="back" href="#/level1">‚Üê Back</a>
      <div class="recipe-card"><div class="recipe-head rh-green">Coming soon‚Ä¶</div></div>
    </main>
  </div>
  <div id="level1-light" class="view">
    <div class="header"><h1 class="title">Light Meals ‚Ä¢ Level 1</h1></div>
    <main class="section">
      <a class="back" href="#/level1">‚Üê Back</a>
      <div class="recipe-card"><div class="recipe-head rh-yellow">Coming soon‚Ä¶</div></div>
    </main>
  </div>
  <div id="level1-hearty" class="view">
    <div class="header"><h1 class="title">Hearty Meals ‚Ä¢ Level 1</h1></div>
    <main class="section">
      <a class="back" href="#/level1">‚Üê Back</a>
      <div class="recipe-card"><div class="recipe-head rh-pink">Coming soon‚Ä¶</div></div>
    </main>
  </div>

  <!-- LEVEL 2 -->
  <div id="level2" class="view">
    <div class="header"><h1 class="title">Level 2</h1><div class="subtitle">Choose a subcategory</div></div>
    <main class="section center">
      <a class="back" href="#/">‚Üê Back</a>
      <div class="pill-grid">
        <a class="pill" href="#/level2/snacks">ü•™ Snacks</a>
        <a class="pill" href="#/level2/light">ü•ó Light Meals</a>
        <a class="pill" href="#/level2/hearty">üç≤ Hearty Meals</a>
      </div>
    </main>
  </div>
  <div id="level2-snacks" class="view">
    <div class="header"><h1 class="title">Snacks ‚Ä¢ Level 2</h1></div>
    <main class="section">
      <a class="back" href="#/level2">‚Üê Back</a>
      <div class="recipe-grid" id="grid-l2-snacks"></div>
    </main>
  </div>
  <div id="level2-light" class="view">
    <div class="header"><h1 class="title">Light Meals ‚Ä¢ Level 2</h1></div>
    <main class="section">
      <a class="back" href="#/level2">‚Üê Back</a>
      <div class="recipe-grid" id="grid-l2-light"></div>
    </main>
  </div>
  <div id="level2-hearty" class="view">
    <div class="header"><h1 class="title">Hearty Meals ‚Ä¢ Level 2</h1></div>
    <main class="section">
      <a class="back" href="#/level2">‚Üê Back</a>
      <div class="recipe-grid" id="grid-l2-hearty"></div>
    </main>
  </div>

  <!-- LEVEL 3 -->
  <div id="level3" class="view">
    <div class="header"><h1 class="title">Level 3</h1><div class="subtitle">Choose a subcategory</div></div>
    <main class="section center">
      <a class="back" href="#/">‚Üê Back</a>
      <div class="pill-grid">
        <a class="pill" href="#/level3/snacks">ü•™ Snacks</a>
        <a class="pill" href="#/level3/light">ü•ó Light Meals</a>
        <a class="pill" href="#/level3/hearty">üç≤ Hearty Meals</a>
      </div>
    </main>
  </div>
  <div id="level3-snacks" class="view">
    <div class="header"><h1 class="title">Snacks ‚Ä¢ Level 3</h1></div>
    <main class="section">
      <a class="back" href="#/level3">‚Üê Back</a>
      <div class="recipe-grid" id="grid-l3-snacks"></div>
    </main>
  </div>
  <div id="level3-light" class="view">
    <div class="header"><h1 class="title">Light Meals ‚Ä¢ Level 3</h1></div>
    <main class="section">
      <a class="back" href="#/level3">‚Üê Back</a>
      <div class="recipe-grid" id="grid-l3-light"></div>
    </main>
  </div>
  <div id="level3-hearty" class="view">
    <div class="header"><h1 class="title">Hearty Meals ‚Ä¢ Level 3</h1></div>
    <main class="section">
      <a class="back" href="#/level3">‚Üê Back</a>
      <div class="recipe-grid" id="grid-l3-hearty"></div>
    </main>
  </div>

  <!-- COCKTAILS / SHORTCUTS (still placeholders) -->
  <div id="cocktails" class="view">
    <div class="header"><h1 class="title">Cocktails</h1></div>
    <main class="section">
      <a class="back" href="#/">‚Üê Back</a>
      <div class="recipe-card"><div class="recipe-head rh-blue">Coming soon‚Ä¶</div></div>
    </main>
  </div>
  <div id="shortcuts" class="view">
    <div class="header"><h1 class="title">Shortcuts</h1></div>
    <main class="section">
      <a class="back" href="#/">‚Üê Back</a>
      <div class="recipe-card"><div class="recipe-head rh-purple">Coming soon‚Ä¶</div></div>
    </main>
  </div>

  <!-- ===== STAPLES (FULLY IMPLEMENTED) ===== -->
  <div id="staples" class="view">
    <div class="header">
      <h1 class="title">Staples</h1>
      <div class="subtitle">Fresh ‚Ä¢ Cupboard ‚Ä¢ Frozen ‚Ä¢ Household</div>
    </div>
    <main class="section">
      <a class="back" href="#/">‚Üê Back</a>

      <div class="list-card" data-cat="fresh">
        <div class="list-head">
          <div class="list-title">ü•¨ Fresh</div>
          <div class="list-actions">
            <button class="icon-btn" data-reset="fresh" title="Reset list">üóëÔ∏è</button>
          </div>
        </div>
        <div class="items" id="list-fresh"></div>
        <div class="add-row">
          <input id="add-fresh" type="text" placeholder="Add fresh item‚Ä¶">
          <button data-add="fresh">Add</button>
        </div>
        <div class="hint">Tip: Use the bin to clear ticks and custom items.</div>
      </div>

      <div class="list-card" data-cat="cupboard">
        <div class="list-head">
          <div class="list-title">üóÑ Cupboard</div>
          <div class="list-actions">
            <button class="icon-btn" data-reset="cupboard" title="Reset list">üóëÔ∏è</button>
          </div>
        </div>
        <div class="items" id="list-cupboard"></div>
        <div class="add-row">
          <input id="add-cupboard" type="text" placeholder="Add cupboard item‚Ä¶">
          <button data-add="cupboard">Add</button>
        </div>
        <div class="hint">Add your own cupboard staples; they‚Äôll stick around.</div>
      </div>

      <div class="list-card" data-cat="frozen">
        <div class="list-head">
          <div class="list-title">‚ùÑ Frozen</div>
          <div class="list-actions">
            <button class="icon-btn" data-reset="frozen" title="Reset list">üóëÔ∏è</button>
          </div>
        </div>
        <div class="items" id="list-frozen"></div>
        <div class="add-row">
          <input id="add-frozen" type="text" placeholder="Add frozen item‚Ä¶">
          <button data-add="frozen">Add</button>
        </div>
        <div class="hint">Your added items persist until you hit the bin.</div>
      </div>

      <div class="list-card" data-cat="household">
        <div class="list-head">
          <div class="list-title">üßπ Household</div>
          <div class="list-actions">
            <button class="icon-btn" data-reset="household" title="Reset list">üóëÔ∏è</button>
          </div>
        </div>
        <div class="items" id="list-household"></div>
        <div class="add-row">
          <input id="add-household" type="text" placeholder="Add household item‚Ä¶">
          <button data-add="household">Add</button>
        </div>
        <div class="hint">Tick things off as you go; reset anytime.</div>
      </div>

    </main>
  </div>

  <!-- Recipe detail view -->
  <div id="recipe-view" class="view">
    <div class="header"><h1 class="title" id="rv-title">Recipe</h1></div>
    <main class="section" id="rv-body"></main>
  </div>

<script>
/* Router + dynamic recipe grid/detail for Level 2 & 3 and full Staples logic */
(function(){
  const routes = {
    "": "home",
    "/": "home",
    "/level1": "level1",
    "/level1/snacks": "level1-snacks",
    "/level1/light": "level1-light",
    "/level1/hearty": "level1-hearty",
    "/level2": "level2",
    "/level2/snacks": "level2-snacks",
    "/level2/light": "level2-light",
    "/level2/hearty": "level2-hearty",
    "/level3": "level3",
    "/level3/snacks": "level3-snacks",
    "/level3/light": "level3-light",
    "/level3/hearty": "level3-hearty",
    "/cocktails": "cocktails",
    "/shortcuts": "shortcuts",
    "/staples": "staples"
  };

  const colours = ["green","yellow","pink","blue","purple","red"];
  const colorClass = i => colours[i % colours.length];

  function ensureGrids(){
    const make = (idBase, level, cat) => {
      const grid = document.getElementById(idBase);
      if(!grid || grid.dataset.done) return;
      let s = "";
      for(let i=1;i<=10;i++){
        const c = colorClass(i-1);
        s += `<a class="rec-btn c-${c}" href="#/${level}/${cat}/${i}">${cap(cat)} Recipe ${i}</a>`;
      }
      grid.innerHTML = s;
      grid.dataset.done = "1";
    };
    make("grid-l2-snacks","level2","snacks");
    make("grid-l2-light","level2","light");
    make("grid-l2-hearty","level2","hearty");
    make("grid-l3-snacks","level3","snacks");
    make("grid-l3-light","level3","light");
    make("grid-l3-hearty","level3","hearty");
  }

  function cap(s){ return s.charAt(0).toUpperCase() + s.slice(1); }

  function render(){
    const hash = decodeURI(location.hash.replace(/^#/, ""));
    // deep recipe route: /level[23]/(snacks|light|hearty)/N
    const m = hash.match(/^\/(level[23])\/(snacks|light|hearty)\/(\d{1,2})$/);
    if(m){ return showRecipe(m[1], m[2], parseInt(m[3],10)); }
    const key = hash in routes ? hash : ("/" + hash) in routes ? ("/" + hash) : "";
    const targetId = routes[key] || "home";
    document.querySelectorAll(".view").forEach(v => v.classList.remove("active"));
    const target = document.getElementById(targetId);
    if(target){ target.classList.add("active"); }
    if(targetId.startsWith("level2") || targetId.startsWith("level3")) ensureGrids();
    if(targetId === "staples") renderStaples();
    window.scrollTo({top:0, behavior:"instant"});
  }

  function showRecipe(level, cat, idx){
    document.querySelectorAll(".view").forEach(v => v.classList.remove("active"));
    const body = document.getElementById("rv-body");
    const title = `${cap(cat)} Recipe ${idx}`;
    document.getElementById("rv-title").textContent = title;
    const color = colorClass(idx-1);
    body.innerHTML = `
      <div class="recipe-card">
        <div class="recipe-head rh-${color}">${title} ‚Ä¢ ${level.toUpperCase()}</div>
        <h3>Ingredients</h3>
        <ul>
          <li>Ingredient 1</li>
          <li>Ingredient 2</li>
          <li>Ingredient 3</li>
        </ul>
        <h3>Method</h3>
        <ol>
          <li>Step 1</li>
          <li>Step 2</li>
          <li>Step 3</li>
        </ol>
        <a class="back" href="#/${level}/${cat}">‚Üê Back</a>
      </div>
    `;
    document.getElementById("recipe-view").classList.add("active");
    window.scrollTo({top:0, behavior:"instant"});
  }

  /* ===== Staples logic ===== */
  const DEFAULTS = {
    fresh: ["Milk","Eggs","Butter","Cheese","Lettuce","Tomatoes"],
    cupboard: ["Pasta","Rice","Tinned beans","Flour","Sugar","Cooking oil"],
    frozen: ["Frozen peas","Frozen chips","Frozen pizza","Ice cream"],
    household: ["Toilet paper","Washing-up liquid","Sponges","Bin bags"]
  };
  const KEY = cat => `tali_staples_${cat}`;

  function load(cat){
    try {
      const raw = localStorage.getItem(KEY(cat));
      if(!raw) return DEFAULTS[cat].map(t => ({text:t, checked:false}));
      const parsed = JSON.parse(raw);
      // If first load after defaults changed, ensure objects
      return parsed.map(x => typeof x === "string" ? ({text:x, checked:false}) : x);
    } catch(e){
      return DEFAULTS[cat].map(t => ({text:t, checked:false}));
    }
  }
  function save(cat, items){
    try { localStorage.setItem(KEY(cat), JSON.stringify(items)); } catch(e){}
  }
  function setChecked(cat, idx, checked){
    const items = load(cat);
    if(items[idx]) items[idx].checked = checked;
    save(cat, items);
  }
  function addItem(cat, text){
    const t = text.trim();
    if(!t) return;
    const items = load(cat);
    items.push({text:t, checked:false});
    save(cat, items);
    renderList(cat);
  }
  function resetList(cat){
    try { localStorage.removeItem(KEY(cat)); } catch(e){}
    renderList(cat, true);
  }

  function renderList(cat, useDefaults=false){
    const container = document.getElementById(`list-${cat}`);
    if(!container) return;
    const items = useDefaults ? DEFAULTS[cat].map(t => ({text:t, checked:false})) : load(cat);
    container.innerHTML = items.map((it, i) => `
      <div class="item-row">
        <input type="checkbox" id="${cat}-${i}" ${it.checked ? "checked":""} data-cat="${cat}" data-idx="${i}">
        <label for="${cat}-${i}">${it.text}</label>
      </div>
    `).join("");
  }

  function renderStaples(){
    // render each list
    ["fresh","cupboard","frozen","household"].forEach(cat => renderList(cat));
    // wire up add buttons
    document.querySelectorAll('[data-add]').forEach(btn => {
      const cat = btn.getAttribute('data-add');
      btn.onclick = () => {
        const input = document.getElementById(`add-${cat}`);
        addItem(cat, input.value || "");
        input.value = "";
        input.focus();
      };
    });
    // wire up reset (bin) buttons
    document.querySelectorAll('[data-reset]').forEach(btn => {
      const cat = btn.getAttribute('data-reset');
      btn.onclick = () => resetList(cat);
    });
    // handle toggles
    document.querySelectorAll('#staples input[type="checkbox"]').forEach(cb => {
      cb.onchange = (e)=> setChecked(cb.dataset.cat, parseInt(cb.dataset.idx,10), cb.checked);
    });
  }

  window.addEventListener("hashchange", render);
  window.addEventListener("DOMContentLoaded", render);
})();
</script>
</body>
</html>
